<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="./images/favicon.png" type="image/png" />
    <title>Quay số trúng thưởng - KHASERVICE</title>
    <link rel="stylesheet" href="style.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <canvas id="fallingCanvasMai"></canvas>
    <canvas id="fallingCanvasDao"></canvas>
    <!-- Hoa mai cố định ở góc phải -->
    <img src="./images/mai.png" class="fixed-flower fixed-mai" alt="Hoa Mai" />

    <!-- Hoa đào cố định ở góc trái -->
    <img src="./images/dao.png" class="fixed-flower fixed-dao" alt="Hoa Đào" />
    <div class="container">
      <audio id="audio-player" src="./musics/lucky-number.mp3"></audio>
      <audio id="audio-player1" src="./musics/number.mp3"></audio>
      <audio id="audio-player2" loop></audio>
      <div>
        <img
          alt="Logo"
          class="logo"
        />
        <h1
          style="
            font-family: 'Quicksand', sans-serif;
            color: #ffd700;
            font-size: 52px;
            font-weight: bold 700;
            margin: auto;
          "
        >
          Quay số trúng thưởng
        </h1>
        <h2
          class="price"
          style="font-family: 'Quicksand', sans-serif; color: #ffd700"
        ></h2>
        <!-- Tiêu đề giải thưởng -->
      </div>
      <div
        style="
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 20px;
        "
      >
        <div class="number-display">
          <div class="number" id="number1">0</div>
          <div class="number" id="number2">0</div>
          <div class="number" id="number3">0</div>
        </div>
        <div class="manual-spin-button">
          <button>QUAY</button>
        </div>
      </div>
      <div class="number-buttons">
        <button class="spin-small" data-prize="Giải đặc biệt" data-count="1">
          Giải đặc biệt
        </button>
        <button class="spin-small" data-prize="Giải nhất" data-count="1">
          Giải nhất
        </button>
        <button class="spin-small" data-prize="Giải nhì" data-count="3">
          Giải nhì
        </button>
        <button class="spin-small" data-prize="Giải ba" data-count="5">
          Giải ba
        </button>
        <button
          class="spin-small"
          data-prize="Giải khuyến khích"
          data-count="10"
        >
          Giải khuyến khích
        </button>
        <button class="spin-small" data-prize="Giải phụ" data-count="20">
          Giải phụ
        </button>
      </div>

      <div class="results">
        <h3>Danh sách kết quả đã quay:</h3>
        <ul id="result-list"></ul>
      </div>
    </div>
    <div id="settings-modal" class="modal hidden">
      <div class="settings-container">
        <!-- Sidebar -->
        <div class="settings-sidebar">
          <h2 style="text-align: center; color: #fff; margin-bottom: 20px;">Cài đặt</h2>
          <ul>
            <li class="active" data-tab="general">
              <a href="#">Chung</a>
            </li>
            <li data-tab="prizes">
              <a href="#">Giải thưởng</a>
            </li>
            <li data-tab="sound">
              <a href="#">Âm thanh</a>
            </li>
            <li data-tab="effects">
              <a href="#">Hiệu ứng</a>
            </li>
          </ul>
           <div class="modal-actions" style="text-align: center; margin-top: 20px; position: absolute; bottom: 20px; width: 100%;">
              <button id="close-settings-button" class="settings-button cancel">Đóng</button>
          </div>
        </div>
        
        <!-- Content -->
        <div class="settings-content">
          <!-- General Settings -->
          <div id="general-settings" class="settings-tab active">
            <h3>Tùy chỉnh chung</h3>
            <div id="branding-editor">
              <div class="setting-entry">
                <label for="company-name-input">Tên công ty</label>
                <input type="text" id="company-name-input" placeholder="Nhập tên công ty">
              </div>
              <div class="setting-entry">
                <label for="logo-file-input">Tệp logo (dùng cho logo và favicon)</label>
                <input type="file" id="logo-file-input" accept="image/png, image/jpeg, image/gif">
              </div>
               <div class="setting-entry">
                <label for="info-image-input">Ảnh giới thiệu (GIF, JPG, PNG)</label>
                <input type="file" id="info-image-input" accept="image/gif, image/jpeg, image/png">
              </div>
               <div class="setting-entry">
                <label for="background-image-input">Ảnh nền</label>
                <input type="file" id="background-image-input" accept="image/jpeg, image/png, image/gif">
              </div>
            </div>
            <button id="save-branding-button" class="settings-button save">Lưu thay đổi</button>
            <button id="show-info-modal-button" class="settings-button">Hiển thị lại ảnh giới thiệu</button>
          </div>
          
          <!-- Prize Settings -->
          <div id="prizes-settings" class="settings-tab">
            <h3>Cài đặt giải thưởng</h3>
            <div id="prize-list-editor">
              <!-- Prize entries will be dynamically inserted here -->
            </div>
            <button id="add-prize-button" class="settings-button">Thêm giải thưởng</button>
            <button id="save-prizes-button" class="settings-button save">Lưu giải thưởng</button>
          </div>
          
          <!-- Sound Settings -->
          <div id="sound-settings" class="settings-tab">
            <h3>Cài đặt âm thanh</h3>
            <div class="setting-entry">
                <label>Âm thanh nền</label>
                <button id="toggle-sound-button" class="settings-button">Tắt âm thanh</button>
            </div>
             <div class="setting-entry">
                <label>Đổi nhạc nền</label>
                <button id="change-music-button" class="settings-button">Chọn tệp nhạc</button>
            </div>
          </div>

          <!-- Effects Settings -->
          <div id="effects-settings" class="settings-tab">
            <h3>Cài đặt hiệu ứng</h3>
            <div id="effects-editor">
              <div class="setting-entry-row">
                <label for="toggle-flowers-checkbox">Hiệu ứng hoa rơi</label>
                <label class="switch">
                  <input type="checkbox" id="toggle-flowers-checkbox">
                  <span class="slider round"></span>
                </label>
              </div>
              <div class="setting-entry">
                <label for="flower-speed-slider">Tốc độ rơi (hiện tại: <span id="flower-speed-value">1</span>)</label>
                <input type="range" id="flower-speed-slider" min="0.1" max="5" step="0.1" value="1">
              </div>
              <div class="setting-entry-row">
                <label for="toggle-fireworks-checkbox">Hiệu ứng pháo hoa</label>
                 <label class="switch">
                  <input type="checkbox" id="toggle-fireworks-checkbox">
                  <span class="slider round"></span>
                </label>
              </div>
              <div class="setting-entry">
                <label>Kiểu pháo hoa</label>
                <div id="firework-style-cards" class="card-select-container">
                  <!-- Các thẻ kiểu pháo hoa sẽ được chèn động từ script.js -->
                </div>
              </div>
            </div>
            <button id="save-effects-button" class="settings-button save">Lưu hiệu ứng</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal -->
    <div id="notification-modal" class="modal hidden">
      <div class="modal-content">
        <p id="modal-message"></p>
        <button id="close-modal">OK</button>
      </div>
    </div>

    <canvas id="canvas"></canvas>
    <script src="./script.js"></script>
    <script src="./fallingFlowers.js"></script>
    <div id="infoModal" class="modal-info">
      <div class="modal-info-content">
        <img alt="Welcome Animation" />
      </div>
    </div>

    <div id="congratulationsModal" class="modal-info-congrat">
      <div class="modal-info-content-congrat">
        <!-- <img src="./images/congrat.png" alt="Congratulations Image" class="congrat-img" /> -->
        <img
          src="./images/gif-congrat.gif"
          alt="Congrat Animation"
          class="congrat-img"
        />
        <div id="lucky-number-display" class="lucky-number">000</div>
      </div>
    </div>

    <script>
      // Lấy modal
      const infoModal = document.getElementById("infoModal");

      // Đóng modal khi bấm ra ngoài
      infoModal.addEventListener("click", function (e) {
        if (e.target === infoModal) {
          infoModal.classList.add("hidden"); // Thêm lớp hidden để ẩn modal
        }
      });

      // Hiển thị modal khi trang được tải
      window.addEventListener("load", function () {
        infoModal.classList.remove("hidden");
      });
    </script>
  </body>
</html>
